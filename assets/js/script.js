
let questions = [

    {
        question: "Which Grammy award did Burna Boy win in 2021?",
        answers: 
            {
                option1: "Song of the year Grammy", 
                option2: "Best rap song Grammy", 
                option3: "Album of the year Grammy", 
                option4: "Global Music album Grammy"
            },
        rightAnswer: "4"
    },
    
    {
        question: "Which artist released the major breakout song 'Dumebi' from his self-titled EP in 2019?",
        answers: 
            {
                option1: "Adekunle Gold", 
                option2: "Naira Marley", 
                option3: "Rema", 
                option4: "Mayorkun"
            },
        rightAnswer: "3"
    },

    {
        question: "Which artist won the Grammy award for 'Global Music Album' in 2022?",
        answers: 
            {
                option1: "Burna Boy", 
                option2: "Wizkid", 
                option3: "Angélique Kidjo", 
                option4: "Wande Coal"
            },
        rightAnswer: "3"
    },

    {
        question: "Which Artist released the song 'Eloko Oyo' in 2017?",
        answers: 
            {
                option1: "Fally Ipupa", 
                option2: "Koffi Olomide", 
                option3: "Awilo Longomba", 
                option4: "Innoss B"
            },
        rightAnswer: "1"
    },

    {
        question: "Davido founded the record label DMW in 2016. What does DMW stand for?",
        answers: 
            {
                option1: "Dance Masters Worldwide", 
                option2: "Davido Music Worldwide", 
                option3: "Davido's Media Wins", 
                option4: "Davido Millions Works"
            },
        rightAnswer: "2"
    },

    {
        question: "Which artist won the Grammy award for 'Best Music Video' in 2021?",
        answers: 
            {
                option1: "Wizkid", 
                option2: "Sikiru Adepoju", 
                option3: "Chamillionaire", 
                option4: "Burna Boy"
            },
        rightAnswer: "1"
    },
    
    {
        question: "Where did Afrobeats music originate?",
        answers: 
            {
                option1: "Nigeria", 
                option2: "South Africa", 
                option3: "Ghana", 
                option4: "A and C"
            },
        rightAnswer: "4"
    },
    
    {
        question: "Finish the lyrics from Whizkid (ft. Tems) Essence: 'Time is of the essence, I tried to teach you…'",
        answers: 
            {
                option1: "…But you don't want to listen.", 
                option2: "…But I might need some lessons.", 
                option3: "…But I have a confession.", 
                option4: "…But there is some resistance."
            },
        rightAnswer: "2"
    },

    {
        question: "Who is the Nigerian composer, multi-instrumentalist, and politician activist known as the 'Pioneer of Afrobeats'?",
        answers: 
            {
                option1: "Fela Anikulapo-Kuti.", 
                option2: "Mulatu Astake.", 
                option3: "Salif Keita.", 
                option4: "Manu Dibangu."
            },
        rightAnswer: "1"
    },

    {
        question: "In the song 'Kumama Papa' what does 'Azalaka Kisi ya soni' translate to?",
        answers: 
            {
                option1: "He is with me.", 
                option2: "He has shown me mercy.", 
                option3: "He is the medicine for shame.", 
                option4: "He will show me the way."
            },
        rightAnswer: "3"
    },

    {
        question: "In the name 'Zlatan Ibile' what does Ibile translate to?",
        answers: 
            {
                option1: "Great.", 
                option2: "Local.", 
                option3: "Favourite.", 
                option4: "Special."
            },
        rightAnswer: "2"
    },

    {
        question: "Which central African artist is nicknamed 'Dicap La marveille'?",
        answers: 
            {
                option1: "Koffi Olomide.", 
                option2: "Fally Ipupa.", 
                option3: "Diamond Platinumz.", 
                option4: "Burna Boy."
            },
        rightAnswer: "2"
    },

    {
        question: "What does Amapiano in the song 'Ameno Amapiano' by Goya Menor, Nektunez mean?",
        answers: 
            {
                option1: "The pianos.", 
                option2: "The singers.", 
                option3: "The runners.", 
                option4: "The artist."
            },
        rightAnswer: "1"
    },
 
    {
        question: "In April 2022, what was the most shazammed song in the world?",
        answers: 
            {
                option1: "Kwaku the Traveller.", 
                option2: "Don't call me.", 
                option3: "Sungba.", 
                option4: "The Best."
            },
        rightAnswer: "1"
    },

    {
        question: "What genre does the song 'Jerusalema' by Master KG fall under?",
        answers: 
            {
                option1: "Hip hop.", 
                option2: "Rock.", 
                option3: "Gospel-house.", 
                option4: "Pop."
            },
        rightAnswer: "3"
    },

    {
        question: "What is the Ghanaian artist Shatta Wale's real name?",
        answers: 
            {
                option1: "Charles Nii Armah Mensah Jr.", 
                option2: "Ayodeji Ibrahim Balogun.", 
                option3: "Damini Ebunoluwa Ogulu.", 
                option4: "Oluwatosin Oluwole Ajibade."
            },
        rightAnswer: "1"
    },

    {
        question: "The afrobeat song 'Jinja' was created by which artist?",
        answers: 
            {
                option1: "Zinoleesky.", 
                option2: "Rahman Jago.", 
                option3: "Barry Jay.", 
                option4: "Tekno."
            },
        rightAnswer: "4"
    },

    {
        question: "Which Irish African artist released the latest single 'Truth Be Told'",
        answers: 
            {
                option1: "Plantain Papi.", 
                option2: "Nonzus Magnus.", 
                option3: "Offica.", 
                option4: "Andre Faz."
            },
        rightAnswer: "2"
    },

    {
        question: "The song 'ZaZoo Zehh' is by?",
        answers: 
            {
                option1: "Portable.", 
                option2: "Poco Lee and Olamide Ft. Portable.", 
                option3: "Portable and Poco Lee Ft. Olamide.", 
                option4: "Portable and Olamide Ft. Poco Lee."
            },
        rightAnswer: "3"
    },

    {
        question: "Don't 'Rush' is by this UK Afrobeats artist?",
        answers: 
            {
                option1: "Young T & Bugsey.", 
                option2: "J Hus.", 
                option3: "Nonzus Magnus.", 
                option4: "Kojo Funds."
            },
        rightAnswer: "1"
    },

    {
        question: "The song Azonto is by?",
        answers: 
            {
                option1: "Not3s.", 
                option2: "Fuse ODG.", 
                option3: "Yxng Bane.", 
                option4: "Juls."
            },
        rightAnswer: "2"
    }
]

document.addEventListener('DOMContentLoaded', function() {
    //get the question and options values from the DOM and store these values in variables

    let acceptAnswers;
    let maxQuestions = 10;
    let currentQuestionIndex = 0;
    let question = document.getElementById('question');
    let choices = document.getElementsByClassName('options');
    let questionCounter = document.getElementById('question-counter');
    // let username = document.getElementById('user-hide');
    let startButton = document.getElementsByClassName('start-btn')[0];
    // let prevButton = document.getElementsByClassName('prev-btn')[0];
    let nextButton = document.getElementsByClassName('next-btn')[0];
    let restartButton = document.getElementsByClassName('restart-btn')[0];

    startButton.addEventListener('click', startQuiz);
    // prevButton.addEventListener('click', prev);
    nextButton.addEventListener('click', nextQuestion);
    restartButton.addEventListener('click', restartQuiz);

/**
 * start the quiz on user click of the start button after creating username
 */
 function startQuiz() {

    score = 0;
    questions = [...questions];
    acceptAnswers = true;
    currentQuestionIndex = 0;
    updateQuestionCounter(); //increments count by 1 on first load
    restartButton.classList.add('hide');

    // handleSubmit();
    displayQuestion();
}

/** 
 * Display quiz when page is loaded
 * to be called inside the start quiz function
*/
function displayQuestion() {

    let currentQuestionIndex = Math.floor(Math.random() * questions.length); 
    let selectedQuestion = questions[currentQuestionIndex];
    question.innerHTML = selectedQuestion.question;

    let correctAnswer = selectedQuestion.rightAnswer;

    //displays questions to the user
    for(let choice of choices) {
        
        let optionsValue = choice.dataset.value;
        choice.innerHTML = selectedQuestion.answers['option' + optionsValue];

        //prevents question repeat
        questions.slice(currentQuestionIndex, 1); 
        
        checkAnswer(choice, correctAnswer);
     }

}

/**
 * Checks the user's selected answer and the correct answer
 */
function checkAnswer(choice, correctAnswer) {

    choice.addEventListener('click', event => {
        if (!acceptAnswers) {
            return;
        }

        acceptAnswers = false;

        let userAnswer = event.target;
        let selectedAnswer = userAnswer.dataset.value;

        if(selectedAnswer === correctAnswer) {
            choice.classList.add('correct');
            incrementScore();
        } else {
            choice.classList.add('incorrect');
            incrementWrongAnswer();
        }
        
        clearSelected(choice);
    });
}

//clear all the previous questions and selected answer
function clearSelected(choice) {
    setTimeout( () => {
            choice.classList.remove('incorrect', 'correct');
        }, 500);
}

/**
 * check user selected value and the correct answer
 * and apply background color specific to correct and incorrect answers 
 */
function nextQuestion() {
    if(currentQuestionIndex === maxQuestions ) {
        score = document.getElementById('scores').innerText;
        if(score >= 8) {
            // question.innerHTML = `Quiz over! Congratulations on finishing the Afrobeats quiz. You Scored: ${score} points. 
            // Fair game, but you may have to try again!`;
            let html = `
            <strong style="color: green">The game is over!</strong> Congratulations on finishing the Afrobeats quiz.
            You Scored: ${score} points. You're a real Afrobeats lover. A pro. Well Done!
            `;
            question.innerHTML = html;

        } else if (score >= 5) {
            question.innerHTML = `The game is over! Congratulations on finishing the Afrobeats quiz. You Scored: ${score} points. 
            Fair game, but you may have to try again!`;
        } else {
            question.innerHTML = `The game is over! Congratulations on finishing the Afrobeats quiz. You Scored: ${score} point(s). 
            Well, not good enough. You definitely have to try again! And goodluck next time!`;
        }

        restartButton.classList.remove('hide');
        nextButton.classList.add('hide');
        question.style.backgroundColor = "gold";
        return; //without return the question counter will not end at count 10
    }

    acceptAnswers = true; //display selecting answers when restart button is activated.
    updateQuestionCounter();
    displayQuestion();
}

/**
 * Keeps track of user's score and 
 * increment the score count if the answer is correct
 */
function incrementScore() {
    let score = document.getElementById('scores').innerText;
    document.getElementById('scores').innerText = ++score;
}

/**
 * Keeps track of user's score and
 * increment the score count if the answer is incorrect
 */
function incrementWrongAnswer() {
    let incorrectScore = document.getElementById('incorrect-score').innerText;
    document.getElementById('incorrect-score').innerText = ++incorrectScore;
}

/**
 * Keeps tract of question counter and
 * increment the question count for each question answered by the user
 */
 function updateQuestionCounter() {  
    currentQuestionIndex++
    questionCounter.innerText = `Question ${currentQuestionIndex} / ${maxQuestions}`;
};

/**
 * restart the quiz on user click of the restart button at the end of every game
 */
 function restartQuiz() {

    nextButton.classList.remove('hide');
    restartButton.classList.add('hide');

    location.reload(); //refreshes the whole page on restart button click
    startQuiz();
    
}


function handleSubmit(event) {
    event.preventDefault;

    let userName = document.getElementById('user-name');
    console.log(userName.value);
    let userForm = document.getAnimations('user-form');

    userForm.submit();

    userForm.addEventListener('click', handleSubmit);
}

startQuiz();

});



